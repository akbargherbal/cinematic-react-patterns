<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>useEffect Alternatives - Visual Workflow Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        .phase-box {
            border: 3px dashed #cbd5e1;
            position: relative;
        }
        .phase-label {
            position: absolute;
            top: -12px;
            left: 16px;
            background: white;
            padding: 0 8px;
            font-weight: 700;
            font-size: 14px;
            color: #475569;
        }
        .bad-pattern {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-left: 4px solid #dc2626;
        }
        .good-pattern {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border-left: 4px solid #16a34a;
        }
        .decision-box {
            border: 2px solid #6366f1;
            background: #eef2ff;
            border-radius: 8px;
            position: relative;
        }
        .decision-arrow {
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid #6366f1;
            margin: 0 auto;
        }
        .alternative-card {
            border: 2px solid #3b82f6;
            background: white;
            transition: all 0.2s;
        }
        .alternative-card:hover {
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }
        .checklist-item {
            display: flex;
            align-items: start;
            gap: 8px;
            margin: 8px 0;
        }
        .checklist-checkbox {
            width: 20px;
            height: 20px;
            margin-top: 2px;
            flex-shrink: 0;
        }
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        @media (max-width: 768px) {
            .code-comparison {
                grid-template-columns: 1fr;
            }
        }
        .legitimate-use {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border-left: 4px solid #2563eb;
        }
        @media print {
            .phase-box {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body class="bg-gray-50 p-8">
    
    <!-- Header -->
    <div class="max-w-6xl mx-auto mb-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-2">Avoiding useEffect in Modern React</h1>
        <p class="text-xl text-gray-600">Find the Right Tool ‚Üí Only Use useEffect When Necessary</p>
        <p class="text-sm text-gray-500 mt-2">Most useEffects can be replaced with simpler patterns</p>
    </div>

    <!-- Key Insight Banner -->
    <div class="max-w-6xl mx-auto mb-8 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-lg shadow-lg p-6">
        <h2 class="text-2xl font-bold mb-2">üö® The Golden Rule</h2>
        <p class="text-lg mb-2">"You Might Not Need an Effect"</p>
        <p class="text-sm">~80% of useEffect usage can be replaced with event handlers, derived state, or other patterns. Effects should be your LAST resort, not your first choice.</p>
    </div>

    <!-- Checklist Sidebar -->
    <div class="max-w-6xl mx-auto mb-8 bg-white rounded-lg shadow-md p-6">
        <h2 class="text-2xl font-bold mb-4 text-gray-900">üìã The Decision Checklist</h2>
        
        <div class="grid md:grid-cols-3 gap-6">
            <div>
                <h3 class="font-bold text-lg mb-3 text-purple-700">Phase 1: Identify (5 min)</h3>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">What are you trying to do?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Is this responding to user action?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Can you calculate during render?</span>
                </div>

                <h3 class="font-bold text-lg mb-3 mt-6 text-blue-700">Phase 2: Check Alternatives (10 min)</h3>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Event handler instead?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Derived state instead?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">useMemo instead?</span>
                </div>
            </div>

            <div>
                <h3 class="font-bold text-lg mb-3 text-green-700">Phase 3: Implement (20 min)</h3>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Remove unnecessary useEffect</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Use simpler alternative</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Test behavior unchanged</span>
                </div>

                <h3 class="font-bold text-lg mb-3 mt-6 text-yellow-700">Phase 4: When Effect IS Needed (15 min)</h3>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">External system sync?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Proper dependencies?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Cleanup function added?</span>
                </div>
            </div>

            <div>
                <h3 class="font-bold text-lg mb-3 text-red-700">Phase 5: Verify (10 min)</h3>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Code simpler than before?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">No infinite loops?</span>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" class="checklist-checkbox">
                    <span class="text-sm">Can explain why this pattern?</span>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto space-y-12">

        <!-- PHASE 0: The Problem -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">PHASE 0: THE PROBLEM</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">useEffect Overuse Anti-Pattern</h2>
            
            <div class="code-comparison mb-6">
                <div class="bad-pattern p-4 rounded-lg">
                    <h3 class="font-bold text-red-900 mb-3">‚ùå Unnecessary useEffect</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function Cart({ items }) {
  const [total, setTotal] = useState(0);
  
  // ‚ùå BAD: Using effect to calculate derived state
  useEffect(() => {
    const newTotal = items.reduce(
      (sum, item) => sum + item.price, 
      0
    );
    setTotal(newTotal);
  }, [items]);
  
  return &lt;div&gt;Total: ${total}&lt;/div&gt;;
}</code></pre>
                    </div>
                    <p class="text-xs text-red-800 mt-2">Runs twice per update, causes extra renders</p>
                </div>
                
                <div class="good-pattern p-4 rounded-lg">
                    <h3 class="font-bold text-green-900 mb-3">‚úÖ Direct Calculation</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function Cart({ items }) {
  // ‚úÖ GOOD: Calculate during render
  const total = items.reduce(
    (sum, item) => sum + item.price, 
    0
  );
  
  return &lt;div&gt;Total: ${total}&lt;/div&gt;;
}</code></pre>
                    </div>
                    <p class="text-xs text-green-800 mt-2">Simpler, faster, no extra renders</p>
                </div>
            </div>
            
            <div class="p-4 bg-orange-50 rounded border-l-4 border-orange-500">
                <p class="font-bold text-orange-900 mb-2">üí° Why This Matters:</p>
                <ul class="text-sm text-orange-800 space-y-1">
                    <li>‚Ä¢ Extra renders hurt performance</li>
                    <li>‚Ä¢ More code = more bugs</li>
                    <li>‚Ä¢ Dependency arrays are error-prone</li>
                    <li>‚Ä¢ Simpler code is easier to maintain</li>
                </ul>
            </div>
        </section>

        <!-- PHASE 1: Identify What You're Doing -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">PHASE 1: IDENTIFY (5 min)</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Ask: What Am I Trying To Do?</h2>
            
            <div class="space-y-4">
                <div class="decision-box p-6">
                    <h3 class="font-bold text-indigo-900 text-center text-xl mb-4">The Three Categories</h3>
                    
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-white rounded-lg p-4 border-2 border-green-500">
                            <div class="text-center mb-2 text-3xl">üìä</div>
                            <h4 class="font-bold text-green-700 mb-2">1. Calculating</h4>
                            <p class="text-sm text-gray-700">Transform existing data</p>
                            <p class="text-xs text-gray-500 mt-2">Example: total price, filtered list, formatted date</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4 border-2 border-blue-500">
                            <div class="text-center mb-2 text-3xl">üëÜ</div>
                            <h4 class="font-bold text-blue-700 mb-2">2. User Action</h4>
                            <p class="text-sm text-gray-700">Respond to clicks/input</p>
                            <p class="text-xs text-gray-500 mt-2">Example: form submit, button click, toggle</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4 border-2 border-purple-500">
                            <div class="text-center mb-2 text-3xl">üîå</div>
                            <h4 class="font-bold text-purple-700 mb-2">3. External System</h4>
                            <p class="text-sm text-gray-700">Sync with outside React</p>
                            <p class="text-xs text-gray-500 mt-2">Example: fetch data, WebSocket, browser API</p>
                        </div>
                    </div>
                </div>
                
                <div class="decision-arrow"></div>
                
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <p class="font-bold text-green-900 mb-2">If Calculating:</p>
                        <p class="text-sm text-green-800">‚Üí Use <strong>direct calculation</strong> or <strong>useMemo</strong></p>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <p class="font-bold text-blue-900 mb-2">If User Action:</p>
                        <p class="text-sm text-blue-800">‚Üí Use <strong>event handler</strong></p>
                    </div>
                    
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <p class="font-bold text-purple-900 mb-2">If External System:</p>
                        <p class="text-sm text-purple-800">‚Üí NOW you need <strong>useEffect</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHASE 2: Alternative #1 - Event Handlers -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">ALTERNATIVE #1: EVENT HANDLERS</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Respond to User Actions</h2>
            
            <div class="code-comparison mb-6">
                <div class="bad-pattern p-4 rounded-lg">
                    <h3 class="font-bold text-red-900 mb-3">‚ùå useEffect for User Action</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function Form() {
  const [data, setData] = useState({});
  const [submitted, setSubmitted] = useState(false);
  
  // ‚ùå BAD: Effect for user action
  useEffect(() => {
    if (submitted) {
      fetch('/api/save', {
        method: 'POST',
        body: JSON.stringify(data)
      });
      setSubmitted(false);
    }
  }, [submitted, data]);
  
  return (
    &lt;button onClick={() => setSubmitted(true)}&gt;
      Submit
    &lt;/button&gt;
  );
}</code></pre>
                    </div>
                </div>
                
                <div class="good-pattern p-4 rounded-lg">
                    <h3 class="font-bold text-green-900 mb-3">‚úÖ Direct Event Handler</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function Form() {
  const [data, setData] = useState({});
  
  // ‚úÖ GOOD: Handle in click event
  const handleSubmit = async () => {
    await fetch('/api/save', {
      method: 'POST',
      body: JSON.stringify(data)
    });
  };
  
  return (
    &lt;button onClick={handleSubmit}&gt;
      Submit
    &lt;/button&gt;
  );
}</code></pre>
                    </div>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div class="p-4 bg-blue-50 rounded border-l-4 border-blue-500">
                    <p class="font-bold text-blue-900 mb-2">‚úÖ Use Event Handlers When:</p>
                    <ul class="text-sm text-blue-800 space-y-1">
                        <li>‚Ä¢ Responding to button clicks</li>
                        <li>‚Ä¢ Handling form submissions</li>
                        <li>‚Ä¢ Reacting to input changes</li>
                        <li>‚Ä¢ Any user interaction</li>
                    </ul>
                </div>
                
                <div class="p-4 bg-red-50 rounded border-l-4 border-red-500">
                    <p class="font-bold text-red-900 mb-2">‚ùå Don't Use Effects For:</p>
                    <ul class="text-sm text-red-800 space-y-1">
                        <li>‚Ä¢ onClick, onSubmit, onChange</li>
                        <li>‚Ä¢ Any callback you control</li>
                        <li>‚Ä¢ User-initiated actions</li>
                        <li>‚Ä¢ One-time operations</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- PHASE 2: Alternative #2 - Derived State -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">ALTERNATIVE #2: DERIVED STATE</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Calculate During Render</h2>
            
            <div class="mb-6">
                <div class="code-comparison mb-4">
                    <div class="bad-pattern p-4 rounded-lg">
                        <h3 class="font-bold text-red-900 mb-3">‚ùå Syncing State with Effect</h3>
                        <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function SearchResults({ query }) {
  const [items, setItems] = useState([]);
  const [filtered, setFiltered] = useState([]);
  
  // ‚ùå BAD: Syncing state
  useEffect(() => {
    const result = items.filter(item =>
      item.name.includes(query)
    );
    setFiltered(result);
  }, [items, query]);
  
  return filtered.map(item => ...)
}</code></pre>
                        </div>
                    </div>
                    
                    <div class="good-pattern p-4 rounded-lg">
                        <h3 class="font-bold text-green-900 mb-3">‚úÖ Derive During Render</h3>
                        <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function SearchResults({ query }) {
  const [items, setItems] = useState([]);
  
  // ‚úÖ GOOD: Calculate directly
  const filtered = items.filter(item =>
    item.name.includes(query)
  );
  
  return filtered.map(item => ...)
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <div class="bg-yellow-50 p-4 rounded border-l-4 border-yellow-500">
                    <p class="font-bold text-yellow-900 mb-2">ü§î "But isn't filtering expensive?"</p>
                    <p class="text-sm text-yellow-800">Only if you have 10,000+ items. For most lists, direct calculation is FASTER than useEffect + extra render.</p>
                    <p class="text-sm text-yellow-800 mt-2">If truly expensive: use <code>useMemo</code>, not <code>useEffect</code>!</p>
                </div>
            </div>
            
            <div class="space-y-4">
                <h3 class="font-bold text-gray-900">Common Derived State Patterns:</h3>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="alternative-card p-4 rounded-lg">
                        <h4 class="font-bold text-blue-700 mb-2">Filtering Lists</h4>
                        <div class="bg-gray-100 p-2 rounded text-xs font-mono">
<code class="language-javascript">const visible = items.filter(i => i.active)</code>
                        </div>
                    </div>
                    
                    <div class="alternative-card p-4 rounded-lg">
                        <h4 class="font-bold text-blue-700 mb-2">Sorting Data</h4>
                        <div class="bg-gray-100 p-2 rounded text-xs font-mono">
<code class="language-javascript">const sorted = [...items].sort((a,b) => a.price - b.price)</code>
                        </div>
                    </div>
                    
                    <div class="alternative-card p-4 rounded-lg">
                        <h4 class="font-bold text-blue-700 mb-2">Aggregating Values</h4>
                        <div class="bg-gray-100 p-2 rounded text-xs font-mono">
<code class="language-javascript">const total = items.reduce((sum, i) => sum + i.price, 0)</code>
                        </div>
                    </div>
                    
                    <div class="alternative-card p-4 rounded-lg">
                        <h4 class="font-bold text-blue-700 mb-2">Formatting Data</h4>
                        <div class="bg-gray-100 p-2 rounded text-xs font-mono">
<code class="language-javascript">const formatted = new Date(timestamp).toLocaleDateString()</code>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHASE 2: Alternative #3 - useMemo -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">ALTERNATIVE #3: useMemo</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">When Calculation IS Expensive</h2>
            
            <div class="code-comparison mb-6">
                <div class="bad-pattern p-4 rounded-lg">
                    <h3 class="font-bold text-red-900 mb-3">‚ùå Effect for Expensive Calc</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function DataGrid({ data }) {
  const [processed, setProcessed] = useState([]);
  
  // ‚ùå BAD: Effect for computation
  useEffect(() => {
    const result = expensiveProcessing(data);
    setProcessed(result);
  }, [data]);
  
  return processed.map(...)
}</code></pre>
                    </div>
                </div>
                
                <div class="good-pattern p-4 rounded-lg">
                    <h3 class="font-bold text-green-900 mb-3">‚úÖ useMemo for Memoization</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function DataGrid({ data }) {
  // ‚úÖ GOOD: Memoize expensive calc
  const processed = useMemo(() => {
    return expensiveProcessing(data);
  }, [data]);
  
  return processed.map(...)
}</code></pre>
                    </div>
                </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div class="p-4 bg-green-50 rounded border-l-4 border-green-500">
                    <p class="font-bold text-green-900 mb-2">‚úÖ Use useMemo When:</p>
                    <ul class="text-sm text-green-800 space-y-1">
                        <li>‚Ä¢ Processing 1000+ items</li>
                        <li>‚Ä¢ Complex calculations (>10ms)</li>
                        <li>‚Ä¢ Creating expensive objects</li>
                        <li>‚Ä¢ Profiling shows it's slow</li>
                    </ul>
                </div>
                
                <div class="p-4 bg-purple-50 rounded border-l-4 border-purple-500">
                    <p class="font-bold text-purple-900 mb-2">üîë Key Differences:</p>
                    <ul class="text-sm text-purple-800 space-y-1">
                        <li>‚Ä¢ <code>useMemo</code>: Returns value</li>
                        <li>‚Ä¢ <code>useEffect</code>: Runs side effects</li>
                        <li>‚Ä¢ <code>useMemo</code>: During render</li>
                        <li>‚Ä¢ <code>useEffect</code>: After render</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Decision Tree -->
        <section class="bg-gradient-to-br from-indigo-600 to-purple-600 text-white rounded-lg p-8">
            <h2 class="text-3xl font-bold mb-6">üß≠ The Complete Decision Tree</h2>
            
            <div class="space-y-4">
                <div class="decision-box p-4">
                    <p class="font-bold text-indigo-900 text-center text-lg">Am I responding to a user action?</p>
                </div>
                <div class="decision-arrow"></div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-blue-100 text-gray-900 p-4 rounded-lg">
                        <p class="font-bold text-blue-700 mb-2">‚úÖ YES ‚Üí Event Handler</p>
                        <div class="text-sm space-y-1">
                            <div><code className="bg-white px-2 py-1 rounded text-xs">onClick={handleClick}</code></div>
                            <div><code className="bg-white px-2 py-1 rounded text-xs">onSubmit={handleSubmit}</code></div>
                            <div><code className="bg-white px-2 py-1 rounded text-xs">onChange={handleChange}</code></div>
                        </div>
                    </div>
                    
                    <div class="bg-white text-gray-900 p-4 rounded-lg border-2 border-white">
                        <p class="font-bold text-gray-700 mb-2">NO ‚Üí Keep Going ‚Üì</p>
                    </div>
                </div>
                
                <div class="decision-box p-4 mt-4">
                    <p class="font-bold text-indigo-900 text-center text-lg">Am I calculating from existing data?</p>
                </div>
                <div class="decision-arrow"></div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-green-100 text-gray-900 p-4 rounded-lg">
                        <p class="font-bold text-green-700 mb-2">‚úÖ YES ‚Üí Derive or Memo</p>
                        <div class="text-sm space-y-1">
                            <div>Simple: <code className="bg-white px-2 py-1 rounded text-xs">const x = calculate(y)</code></div>
                            <div>Expensive: <code className="bg-white px-2 py-1 rounded text-xs">useMemo(() => calc(y), [y])</code></div>
                        </div>
                    </div>
                    
                    <div class="bg-white text-gray-900 p-4 rounded-lg border-2 border-white">
                        <p class="font-bold text-gray-700 mb-2">NO ‚Üí Keep Going ‚Üì</p>
                    </div>
                </div>
                
                <div class="decision-box p-4 mt-4">
                    <p class="font-bold text-indigo-900 text-center text-lg">Am I syncing with an external system?</p>
                </div>
                <div class="decision-arrow"></div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-purple-100 text-gray-900 p-4 rounded-lg">
                        <p class="font-bold text-purple-700 mb-2">‚úÖ YES ‚Üí NOW use useEffect</p>
                        <div class="text-sm space-y-1">
                            <div>‚Ä¢ Fetching data</div>
                            <div>‚Ä¢ WebSocket connections</div>
                            <div>‚Ä¢ Browser APIs (DOM, timers)</div>
                            <div>‚Ä¢ Third-party libraries</div>
                        </div>
                    </div>
                    
                    <div class="bg-red-100 text-gray-900 p-4 rounded-lg">
                        <p class="font-bold text-red-700 mb-2">‚ùå NO ‚Üí Rethink your approach</p>
                        <p class="text-sm">You probably don't need an effect at all!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHASE 4: When Effects ARE Needed -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">PHASE 4: LEGITIMATE USES</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">When useEffect IS the Right Choice</h2>
            
            <p class="text-gray-700 mb-6">These scenarios genuinely require useEffect because they involve synchronizing React with external systems:</p>
            
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="legitimate-use p-4 rounded-lg">
                    <h3 class="font-bold text-blue-900 mb-3">1. Fetching Data</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  
  useEffect(() => {
    let ignore = false;
    
    fetch(`/api/users/${userId}`)
      .then(res => res.json())
      .then(data => {
        if (!ignore) setUser(data);
      });
    
    return () => { ignore = true; };
  }, [userId]);
  
  return user ? &lt;div&gt;{user.name}&lt;/div&gt; : null;
}</code></pre>
                    </div>
                    <p class="text-xs text-blue-800 mt-2">‚úÖ External API, cleanup on unmount</p>
                </div>
                
                <div class="legitimate-use p-4 rounded-lg">
                    <h3 class="font-bold text-blue-900 mb-3">2. Subscriptions</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function ChatRoom({ roomId }) {
  const [messages, setMessages] = useState([]);
  
  useEffect(() => {
    const socket = createSocket(roomId);
    
    socket.on('message', (msg) => {
      setMessages(prev => [...prev, msg]);
    });
    
    return () => socket.disconnect();
  }, [roomId]);
  
  return messages.map(m => &lt;div&gt;{m}&lt;/div&gt;);
}</code></pre>
                    </div>
                    <p class="text-xs text-blue-800 mt-2">‚úÖ WebSocket, cleanup required</p>
                </div>
                
                <div class="legitimate-use p-4 rounded-lg">
                    <h3 class="font-bold text-blue-900 mb-3">3. Browser APIs</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function MouseTracker() {
  const [pos, setPos] = useState({ x: 0, y: 0 });
  
  useEffect(() => {
    const handleMove = (e) => {
      setPos({ x: e.clientX, y: e.clientY });
    };
    
    window.addEventListener('mousemove', handleMove);
    
    return () => {
      window.removeEventListener('mousemove', handleMove);
    };
  }, []);
  
  return &lt;div&gt;{pos.x}, {pos.y}&lt;/div&gt;;
}</code></pre>
                    </div>
                    <p class="text-xs text-blue-800 mt-2">‚úÖ DOM event, cleanup listener</p>
                </div>
                
                <div class="legitimate-use p-4 rounded-lg">
                    <h3 class="font-bold text-blue-900 mb-3">4. Timers & Intervals</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function Countdown({ seconds }) {
  const [remaining, setRemaining] = useState(seconds);
  
  useEffect(() => {
    if (remaining <= 0) return;
    
    const timer = setInterval(() => {
      setRemaining(r => r - 1);
    }, 1000);
    
    return () => clearInterval(timer);
  }, [remaining]);
  
  return &lt;div&gt;{remaining}s&lt;/div&gt;;
}</code></pre>
                    </div>
                    <p class="text-xs text-blue-800 mt-2">‚úÖ Timer API, cleanup on unmount</p>
                </div>
                
                <div class="legitimate-use p-4 rounded-lg">
                    <h3 class="font-bold text-blue-900 mb-3">5. Third-Party Libraries</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function MapWidget({ center }) {
  const mapRef = useRef(null);
  
  useEffect(() => {
    const map = new GoogleMap(mapRef.current, {
      center: center
    });
    
    return () => map.destroy();
  }, []);
  
  useEffect(() => {
    mapRef.current?.setCenter(center);
  }, [center]);
  
  return &lt;div ref={mapRef} /&gt;;
}</code></pre>
                    </div>
                    <p class="text-xs text-blue-800 mt-2">‚úÖ External lib, imperative API</p>
                </div>
                
                <div class="legitimate-use p-4 rounded-lg">
                    <h3 class="font-bold text-blue-900 mb-3">6. Analytics/Logging</h3>
                    <div class="bg-white p-3 rounded text-xs overflow-x-auto">
<pre><code class="language-javascript">function ProductPage({ productId }) {
  useEffect(() => {
    analytics.track('page_view', {
      product: productId,
      timestamp: Date.now()
    });
  }, [productId]);
  
  return &lt;ProductDetails id={productId} /&gt;;
}</code></pre>
                    </div>
                    <p class="text-xs text-blue-800 mt-2">‚úÖ Side effect, doesn't affect render</p>
                </div>
            </div>
            
            <div class="p-4 bg-blue-50 rounded border-l-4 border-blue-500">
                <p class="font-bold text-blue-900 mb-2">üéØ The Pattern:</p>
                <p class="text-sm text-blue-800">useEffect connects React components to <strong>systems outside React's control</strong>. If it's inside React (props, state), you probably don't need an effect.</p>
            </div>
        </section>

        <!-- PHASE 5: Verification -->
        <section class="phase-box bg-white rounded-lg p-8">
            <div class="phase-label">PHASE 5: VERIFY (10 min)</div>
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Did You Choose the Right Pattern?</h2>
            
            <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="bg-green-50 p-4 rounded-lg border-2 border-green-500">
                    <h3 class="font-bold text-green-900 mb-3">‚úÖ Good Signs</h3>
                    <div class="space-y-2 text-sm text-green-800">
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>Code is simpler than before</span>
                        </label>
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>Fewer re-renders in DevTools</span>
                        </label>
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>No dependency array issues</span>
                        </label>
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>Behavior is identical</span>
                        </label>
                    </div>
                </div>
                
                <div class="bg-red-50 p-4 rounded-lg border-2 border-red-500">
                    <h3 class="font-bold text-red-900 mb-3">‚ùå Warning Signs</h3>
                    <div class="space-y-2 text-sm text-red-800">
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>Infinite loop errors</span>
                        </label>
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>Stale state bugs</span>
                        </label>
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>More complex than before</span>
                        </label>
                        <label class="flex items-start gap-2">
                            <input type="checkbox" class="mt-1">
                            <span>Can't explain why you chose this</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="bg-gray-800 text-white rounded-lg p-6">
                <h3 class="font-bold text-xl mb-4">üéØ Self-Test Questions</h3>
                <div class="space-y-3 text-sm">
                    <div class="bg-white/10 p-3 rounded">
                        <p class="font-bold mb-1">Q: Could this run in an event handler?</p>
                        <p class="text-gray-300">If YES ‚Üí Don't use useEffect</p>
                    </div>
                    <div class="bg-white/10 p-3 rounded">
                        <p class="font-bold mb-1">Q: Am I just transforming data?</p>
                        <p class="text-gray-300">If YES ‚Üí Calculate directly or use useMemo</p>
                    </div>
                    <div class="bg-white/10 p-3 rounded">
                        <p class="font-bold mb-1">Q: Does this need cleanup?</p>
                        <p class="text-gray-300">If NO ‚Üí Maybe you don't need useEffect</p>
                    </div>
                    <div class="bg-white/10 p-3 rounded">
                        <p class="font-bold mb-1">Q: Am I syncing with something outside React?</p>
                        <p class="text-gray-300">If YES ‚Üí useEffect is probably right!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Common Mistakes -->
        <section class="bg-red-600 text-white rounded-lg p-8">
            <h2 class="text-3xl font-bold mb-6">üö´ Common Mistakes to Avoid</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white/10 rounded-lg p-4">
                    <h3 class="font-bold text-xl mb-3">The "State Setter Chain"</h3>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono mb-2">
<code>// ‚ùå BAD
const [a, setA] = useState();
const [b, setB] = useState();
useEffect(() => setB(a * 2), [a]);</code>
                    </div>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono">
<code>// ‚úÖ GOOD
const [a, setA] = useState();
const b = a * 2;</code>
                    </div>
                </div>
                
                <div class="bg-white/10 rounded-lg p-4">
                    <h3 class="font-bold text-xl mb-3">The "Submit Effect"</h3>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono mb-2">
<code>// ‚ùå BAD
useEffect(() => {
  if (shouldSubmit) submit();
}, [shouldSubmit]);</code>
                    </div>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono">
<code>// ‚úÖ GOOD
&lt;form onSubmit={submit}&gt;</code>
                    </div>
                </div>
                
                <div class="bg-white/10 rounded-lg p-4">
                    <h3 class="font-bold text-xl mb-3">The "Initialize Once" Effect</h3>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono mb-2">
<code>// ‚ùå BAD
useEffect(() => {
  setData(expensiveCalc());
}, []);</code>
                    </div>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono">
<code>// ‚úÖ GOOD
const [data] = useState(() => expensiveCalc());</code>
                    </div>
                </div>
                
                <div class="bg-white/10 rounded-lg p-4">
                    <h3 class="font-bold text-xl mb-3">The "Props to State" Effect</h3>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono mb-2">
<code>// ‚ùå BAD
useEffect(() => {
  setLocal(props.value);
}, [props.value]);</code>
                    </div>
                    <div class="bg-black/30 p-3 rounded text-xs font-mono">
<code>// ‚úÖ GOOD
// Just use props.value directly!</code>
                    </div>
                </div>
            </div>
        </section>

        <!-- Practice Projects -->
        <section class="bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg p-8">
            <h2 class="text-3xl font-bold mb-4">üéì Practice: Refactor These Anti-Patterns</h2>
            <p class="text-lg mb-6">Find 10 codebases with useEffect overuse and refactor them:</p>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white/10 rounded-lg p-4">
                    <h3 class="font-bold text-xl mb-3">Beginner Refactors</h3>
                    <ol class="space-y-2 text-sm list-decimal list-inside">
                        <li><strong>Shopping Cart Total</strong> - Replace effect with direct calc</li>
                        <li><strong>Form Submit</strong> - Move fetch to onClick handler</li>
                        <li><strong>Filtered List</strong> - Derive from props, no effect</li>
                        <li><strong>Toggle State</strong> - Handle in event, not effect</li>
                        <li><strong>Format Display</strong> - Calculate during render</li>
                    </ol>
                </div>
                
                <div class="bg-white/10 rounded-lg p-4">
                    <h3 class="font-bold text-xl mb-3">Intermediate Refactors</h3>
                    <ol start="6" class="space-y-2 text-sm list-decimal list-inside">
                        <li><strong>Search with Debounce</strong> - Keep effect, fix deps</li>
                        <li><strong>Data Table Sort</strong> - useMemo for expensive sort</li>
                        <li><strong>Form Validation</strong> - Validate on submit, not effect</li>
                        <li><strong>Modal Focus</strong> - Legitimate useEffect case</li>
                        <li><strong>Analytics Tracking</strong> - Legitimate useEffect case</li>
                    </ol>
                </div>
            </div>
            
            <div class="mt-6 p-4 bg-white/10 rounded-lg">
                <p class="font-bold text-lg mb-2">‚è±Ô∏è Time Investment:</p>
                <ul class="text-sm space-y-1">
                    <li>‚Ä¢ Projects 1-5: ~1.5 hours each (remove unnecessary effects)</li>
                    <li>‚Ä¢ Projects 6-10: ~2 hours each (recognize legitimate uses)</li>
                    <li>‚Ä¢ <strong>Total: ~17 hours ‚Üí Effect pattern mastery</strong></li>
                </ul>
            </div>
            
            <div class="mt-4 p-4 bg-yellow-500 text-gray-900 rounded-lg">
                <p class="font-bold mb-2">üîë Success Metric:</p>
                <p class="text-sm">After project #6, your first instinct should be <strong>"Can I avoid useEffect?"</strong> rather than reaching for it immediately.</p>
            </div>
        </section>

        <!-- Quick Reference -->
        <section class="bg-white rounded-lg shadow-lg p-8 border-4 border-purple-500">
            <h2 class="text-2xl font-bold mb-6 text-gray-900">üìñ Quick Reference Card</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-bold text-lg mb-3 text-purple-700">When NOT to Use useEffect</h3>
                    <div class="space-y-2 text-sm">
                        <div class="bg-red-50 p-3 rounded">
                            ‚ùå Transforming data ‚Üí <strong>Calculate directly</strong>
                        </div>
                        <div class="bg-red-50 p-3 rounded">
                            ‚ùå User clicks button ‚Üí <strong>Event handler</strong>
                        </div>
                        <div class="bg-red-50 p-3 rounded">
                            ‚ùå Expensive calculation ‚Üí <strong>useMemo</strong>
                        </div>
                        <div class="bg-red-50 p-3 rounded">
                            ‚ùå Initializing state ‚Üí <strong>useState(() => ...)</strong>
                        </div>
                        <div class="bg-red-50 p-3 rounded">
                            ‚ùå Syncing state ‚Üí <strong>Derive it instead</strong>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="font-bold text-lg mb-3 text-purple-700">When TO Use useEffect</h3>
                    <div class="space-y-2 text-sm">
                        <div class="bg-green-50 p-3 rounded">
                            ‚úÖ Fetching data from API
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            ‚úÖ WebSocket subscriptions
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            ‚úÖ Browser API (DOM events, timers)
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            ‚úÖ Third-party library integration
                        </div>
                        <div class="bg-green-50 p-3 rounded">
                            ‚úÖ Analytics/logging side effects
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border-2 border-purple-300">
                <p class="font-bold text-purple-900 mb-2">üéØ The Golden Question:</p>
                <p class="text-sm text-purple-800">"Am I synchronizing with a system <strong>outside React</strong>?"</p>
                <p class="text-sm text-purple-800 mt-2">If NO ‚Üí You probably don't need useEffect.</p>
                <p class="text-sm text-purple-800">If YES ‚Üí useEffect is the right tool.</p>
            </div>
        </section>

    </div>

    <!-- Footer -->
    <div class="max-w-6xl mx-auto mt-12 text-center text-gray-600 text-sm">
        <p class="font-bold text-lg mb-2">From useEffect Overuse ‚Üí Intentional Patterns</p>
        <p>Print this guide ‚Üí Review your code ‚Üí Refactor 10 components</p>
        <p class="mt-2">After ~17 hours of practice, you'll instinctively choose the right pattern.</p>
        <p class="mt-4 text-xs text-gray-500">Save as <code>react_useeffect_alternatives_guide.html</code></p>
    </div>

    <script>
        // Initialize syntax highlighting
        hljs.highlightAll();
    </script>

</body>
</html>